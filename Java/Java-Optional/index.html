<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.10.1","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Optional class was introduced in Java 8 to better handle null values.">
<meta property="og:type" content="article">
<meta property="og:title" content="Java Optional">
<meta property="og:url" content="http://example.com/Java/Java-Optional/index.html">
<meta property="og:site_name" content="Xing&#39;s Blog">
<meta property="og:description" content="Optional class was introduced in Java 8 to better handle null values.">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2019-01-21T05:11:00.000Z">
<meta property="article:modified_time" content="2019-01-21T05:11:00.000Z">
<meta property="article:author" content="Xinghua Zhang">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Java8">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/Java/Java-Optional/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/Java/Java-Optional/","path":"Java/Java-Optional/","title":"Java Optional"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Java Optional | Xing's Blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Xing's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Creation"><span class="nav-number">1.</span> <span class="nav-text">Creation</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-ofNullable-T"><span class="nav-number">1.1.</span> <span class="nav-text">Optional.ofNullable(T)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-empty"><span class="nav-number">1.2.</span> <span class="nav-text">Optional.empty()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-of-T"><span class="nav-number">1.3.</span> <span class="nav-text">Optional.of(T)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Operation"><span class="nav-number">2.</span> <span class="nav-text">Operation</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-isPresent"><span class="nav-number">2.1.</span> <span class="nav-text">Optional.isPresent()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-isEmpty"><span class="nav-number">2.2.</span> <span class="nav-text">Optional.isEmpty</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-ifPresent-Consumer"><span class="nav-number">2.3.</span> <span class="nav-text">Optional.ifPresent(Consumer)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-orElse-T-other"><span class="nav-number">2.4.</span> <span class="nav-text">Optional.orElse(T other)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-orElseGet-Supplier"><span class="nav-number">2.5.</span> <span class="nav-text">Optional.orElseGet(Supplier)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-or"><span class="nav-number">2.6.</span> <span class="nav-text">Optional.or()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-orElseThrow"><span class="nav-number">2.7.</span> <span class="nav-text">Optional.orElseThrow()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-get"><span class="nav-number">2.8.</span> <span class="nav-text">Optional.get()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-filter-Predicate"><span class="nav-number">2.9.</span> <span class="nav-text">Optional.filter(Predicate)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-map"><span class="nav-number">2.10.</span> <span class="nav-text">Optional.map()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-flatMap"><span class="nav-number">2.11.</span> <span class="nav-text">Optional.flatMap()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-stream"><span class="nav-number">2.12.</span> <span class="nav-text">Optional.stream()</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Best-Practice"><span class="nav-number">3.</span> <span class="nav-text">Best Practice</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#References"><span class="nav-number">4.</span> <span class="nav-text">References</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Xinghua Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">214</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/xinghua24" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xinghua24" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/Java/Java-Optional/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xinghua Zhang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xing's Blog">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Java Optional | Xing's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Java Optional
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-01-21 00:11:00" itemprop="dateCreated datePublished" datetime="2019-01-21T00:11:00-05:00">2019-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html">Optional</a> class was introduced in Java 8 to better handle null values.</p>
<span id="more"></span>

<p><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html">Optional</a>  is a container object which may or may not contain a non-null value.</p>
<h1 id="Creation"><a href="#Creation" class="headerlink" title="Creation"></a>Creation</h1><h2 id="Optional-ofNullable-T"><a href="#Optional-ofNullable-T" class="headerlink" title="Optional.ofNullable(T)"></a>Optional.ofNullable(T)</h2><p>Here <em>Optional.ofNullable()</em> can accept null and non null value.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;String&gt; testString = Optional.ofNullable(s);</span><br></pre></td></tr></table></figure>

<h2 id="Optional-empty"><a href="#Optional-empty" class="headerlink" title="Optional.empty()"></a>Optional.empty()</h2><p>No value is present in this case<br></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">Optional&lt;String&gt; empty = Optional.empty();</span><br></pre></td></tr></table></figure>

<h2 id="Optional-of-T"><a href="#Optional-of-T" class="headerlink" title="Optional.of(T)"></a>Optional.of(T)</h2><p>Returns Optional with specified present non-null value. Use this method only if you are sure the parameter is NOT null.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;String&gt; notEmpty = Optional.of(<span class="string">&quot;foo&quot;</span>);</span><br></pre></td></tr></table></figure>

<h1 id="Operation"><a href="#Operation" class="headerlink" title="Operation"></a>Operation</h1><h2 id="Optional-isPresent"><a href="#Optional-isPresent" class="headerlink" title="Optional.isPresent()"></a>Optional.isPresent()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="title function_">isPresent</span><span class="params">()</span></span><br></pre></td></tr></table></figure>
<p><em>Optional.isPresent()</em> returns true if the given Optional object is non-empty. Otherwise it returns false.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;String&gt; opt = Optional.of(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(opt.isPresent())&#123;</span><br><span class="line">	System.out.println(opt.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Optional-isEmpty"><a href="#Optional-isEmpty" class="headerlink" title="Optional.isEmpty"></a>Optional.isEmpty</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span></span><br></pre></td></tr></table></figure>
<p>Java 11 provides <em>isEmpty()</em> method which is the opposite of <em>isPresent()</em>. If a value is not present, returns true, otherwise false.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;String&gt; optString = Optional.empty();</span><br><span class="line"><span class="keyword">if</span>(optString.isEmpty())&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;optString is empty!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Optional-ifPresent-Consumer"><a href="#Optional-ifPresent-Consumer" class="headerlink" title="Optional.ifPresent(Consumer)"></a>Optional.ifPresent(Consumer)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">ifPresent</span><span class="params">(Consumer&lt;? <span class="built_in">super</span> T&gt; action)</span></span><br></pre></td></tr></table></figure>
<p><em>Optional.ifPresent()</em> performs given action if the given Optional object is non-empty. Otherwise it returns false.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testIfPresent</span><span class="params">()</span> &#123;</span><br><span class="line">	Optional&lt;String&gt; opt = Optional.ofNullable(<span class="string">&quot;FOO&quot;</span>);</span><br><span class="line">	opt.ifPresent(name -&gt; System.out.println(name));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Optional-orElse-T-other"><a href="#Optional-orElse-T-other" class="headerlink" title="Optional.orElse(T other)"></a>Optional.orElse(T other)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">T <span class="title function_">orElse</span><span class="params">(T other)</span></span><br></pre></td></tr></table></figure>
<p>It returns the value if present in Optional Container. Otherwise returns other.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testOrElse</span><span class="params">()</span> &#123;</span><br><span class="line">    Optional&lt;String&gt; nullName = Optional.empty();</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> nullName.orElse(<span class="string">&quot;default&quot;</span>);</span><br><span class="line">    assertEquals(<span class="string">&quot;default&quot;</span>, name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Optional-orElseGet-Supplier"><a href="#Optional-orElseGet-Supplier" class="headerlink" title="Optional.orElseGet(Supplier)"></a>Optional.orElseGet(Supplier)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">T <span class="title function_">orElseGet</span><span class="params">(Supplier&lt;? extends T&gt; supplier)</span></span><br></pre></td></tr></table></figure>
<p>Return the value if present, otherwise invoke other and return the result of that invocation.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testOrElseGet</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">nullName</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">	<span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> Optional.ofNullable(nullName).orElseGet(() -&gt; <span class="string">&quot;john&quot;</span>);</span><br><span class="line">	assertEquals(<span class="string">&quot;john&quot;</span>, name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Optional.orElse vs Optional.orElseGet</strong><br><br>orElse will always create the default value. orElseGet will invoke the supplier to calculate the value to return.</p>
<h2 id="Optional-or"><a href="#Optional-or" class="headerlink" title="Optional.or()"></a>Optional.or()</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;T&gt; or(Supplier&lt;? extends Optional&lt;? extends T&gt;&gt; supplier)</span><br></pre></td></tr></table></figure>
<p>If a value is present, returns an <em>Optional</em> describing the value, otherwise returns an <em>Optional</em> produced by the supplying function.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testOr</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">nullName</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    Optional&lt;String&gt; name = Optional.ofNullable(nullName).or(() -&gt; Optional.ofNullable(<span class="string">&quot;john&quot;</span>));</span><br><span class="line">    assertEquals(<span class="string">&quot;john&quot;</span>, name.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Optional-orElseThrow"><a href="#Optional-orElseThrow" class="headerlink" title="Optional.orElseThrow()"></a>Optional.orElseThrow()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">T <span class="title function_">orElseThrow</span><span class="params">()</span></span><br><span class="line">&lt;X <span class="keyword">extends</span> <span class="title class_">Throwable</span>&gt; T <span class="title function_">orElseThrow</span><span class="params">(Supplier&lt;? extends X&gt; exceptionSupplier)</span>  <span class="keyword">throws</span> X</span><br></pre></td></tr></table></figure>
<p>Return the contained value, if present, otherwise throw an exception. If no argument is provieded, <a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/NoSuchElementException.html">NoSuchElementException</a> will be thrown</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test(expected=IllegalArgumentException.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testOrElseThrow</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">nullName</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">	<span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> Optional.ofNullable(nullName).orElseThrow(IllegalArgumentException::<span class="keyword">new</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Optional-get"><a href="#Optional-get" class="headerlink" title="Optional.get()"></a>Optional.get()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">T <span class="title function_">get</span><span class="params">()</span></span><br></pre></td></tr></table></figure>
<p>This method can throw NoSuchElementException exception.</p>
<p><strong>DO NOT</strong> call <em>Optional.get</em> method unless you can prove it will never be null; instead use one of the safe methods like <em>ifPresent</em> or <em>orElse</em>.</p>
<p>You can always replace <em>get()</em> with other methods like <em>orElse()</em>, <em>orElseThrow()</em>, <em>ifPresent()</em>, <em>map()</em> or <em>flatMap()</em>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;String&gt; opt = Optional.of(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(opt.isPresent())&#123;</span><br><span class="line">	System.out.println(opt.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Optional-filter-Predicate"><a href="#Optional-filter-Predicate" class="headerlink" title="Optional.filter(Predicate)"></a>Optional.filter(Predicate)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;T&gt; <span class="title function_">filter</span><span class="params">(Predicate&lt;? <span class="built_in">super</span> T&gt; predicate)</span></span><br></pre></td></tr></table></figure>
<p>If a value is present, and the value matches the given predicate, return an Optional describing the value, otherwise return an empty Optional.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;String&gt; opt = Optional.ofNullable(<span class="string">&quot;&quot;</span>);</span><br><span class="line">opt.filter(s -&gt; !s.isEmpty()).ifPresent(s -&gt; System.out.println(<span class="string">&quot;Non empty String value is &quot;</span> + s));</span><br></pre></td></tr></table></figure>

<h2 id="Optional-map"><a href="#Optional-map" class="headerlink" title="Optional.map()"></a>Optional.map()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;U&gt; Optional&lt;U&gt; <span class="title function_">map</span><span class="params">(Function&lt;? <span class="built_in">super</span> T,? extends U&gt; mapper)</span></span><br></pre></td></tr></table></figure>

<p>If a value is present, apply the provided mapping function to it, and if the result is non-null, return an Optional describing the result.<br>Otherwise return an empty Optional.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testMap</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;foo&quot;</span>;</span><br><span class="line">	</span><br><span class="line">	Optional&lt;String&gt; nameOptional = Optional.ofNullable(name);</span><br><span class="line">	</span><br><span class="line">	<span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nameOptional.map(String::length).orElse(<span class="number">0</span>);</span><br><span class="line">	assertEquals(<span class="number">3</span>, len);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Optional-flatMap"><a href="#Optional-flatMap" class="headerlink" title="Optional.flatMap()"></a>Optional.flatMap()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;U&gt; Optional&lt;U&gt; <span class="title function_">flatMap</span><span class="params">(Function&lt;? <span class="built_in">super</span> T,? extends Optional&lt;? extends U&gt;&gt; mapper)</span></span><br></pre></td></tr></table></figure>
<p><em>flatMap</em> does the mapping, then flats the results. This avoids returning values of type <code>Optional&lt;Optional&lt;String&gt;&gt;</code>. Use <em>Optional.flatMap()</em> when the mapping function returns an Optional.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">myMapFunction</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> s.toUpperCase();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Optional&lt;String&gt; <span class="title function_">myMapFunction2</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Optional.ofNullable(s).map(String::toUpperCase);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    Optional&lt;String&gt; opt = Optional.ofNullable(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// map</span></span><br><span class="line">    assertEquals(Optional.of(<span class="string">&quot;FOO&quot;</span>), opt.map(s -&gt; myMapFunction(s)));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// map</span></span><br><span class="line">    assertEquals(Optional.of(Optional.of(<span class="string">&quot;FOO&quot;</span>)), opt.map(s -&gt; myMapFunction2(s)));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// use flatmap with function that returns Optional</span></span><br><span class="line">    assertEquals(Optional.of(<span class="string">&quot;FOO&quot;</span>), opt.flatMap(s -&gt; myMapFunction2(s)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="Optional-stream"><a href="#Optional-stream" class="headerlink" title="Optional.stream()"></a>Optional.stream()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;T&gt; <span class="title function_">stream</span><span class="params">()</span></span><br></pre></td></tr></table></figure>
<p>This method is introduced in Java 9. </p>
<p>If a value is present, returns a sequential Stream containing only that value, otherwise returns an empty Stream.</p>
<p>Example to get all comments from an optional post that is less than 100 characters. This is very hard to code with Optional methods alone. So have to convert to stream using <strong>stream</strong> method.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Post&gt; optionalPost = Optional.ofNullable(post1);</span><br><span class="line">List&lt;Comment&gt; shortComments = optionalPost.stream()</span><br><span class="line">        .flatMap(post -&gt; post.getComments().stream())</span><br><span class="line">        .filter(comment -&gt; comment.getContent().length() &lt; <span class="number">100</span>)</span><br><span class="line">        .toList();</span><br><span class="line">shortComments.forEach(System.out::println);</span><br></pre></td></tr></table></figure>



<h1 id="Best-Practice"><a href="#Best-Practice" class="headerlink" title="Best Practice"></a>Best Practice</h1><p><strong>DO NOT</strong> use Optional as a field because <strong>Optional</strong> is not Serializable.</p>
<p><strong>DO NOT</strong> use Optional as parameter for methods or constructor because this will make method call complicated.</p>
<p>You can use Optional as the getter return type, but do not over-use it. see <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type">Should Java 8 getters return optional type?</a></p>
<p><strong>Optional is intended to be used as a method return type.</strong> This helps create fluent readable code.</p>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><ul>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html">Optional Class</a></li>
<li><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-difference-map-and-flatmap">The Difference Between map() and flatMap() by Baeldung</a></li>
<li><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-optional">Guide To Java 8 Optional by Baeldung</a></li>
<li><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-9-optional">Java 9 Optional API Additions by Baeldung</a></li>
<li><a target="_blank" rel="noopener" href="http://www.baeldung.com/java-optional">Optional Tutorial</a></li>
<li><a target="_blank" rel="noopener" href="http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html">Oracle Optional Tutorial</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type/26328555#26328555">Good Practice - StackOverflow - Should Java 8 getters return optional type?</a></li>
<li><a target="_blank" rel="noopener" href="https://stackify.com/optional-java/">Understanding, Accepting and Leveraging Optional in Java by EUGEN PARASCHIV</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Java/" rel="tag"># Java</a>
              <a href="/tags/Java8/" rel="tag"># Java8</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/Java/Java-Stream-API/" rel="prev" title="Java Stream API">
                  <i class="fa fa-chevron-left"></i> Java Stream API
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/Java/Project-Lombok-Intro/" rel="next" title="Project Lombok Intro">
                  Project Lombok Intro <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xinghua Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  





</body>
</html>
